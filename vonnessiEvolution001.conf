# Mass measurements are in grams
# Length measurements are in cm

ken-data {                              #Evans
  owner-surname = "von Nessi"

  creator = "Evolution"

  measurements {

    uncertainties {
      mass-uncertainty = 0.5
      holder-position-uncertainty = 0.5
    }

    fittings {
      tsuka {
        mass = 127.95
        length = 26.5
      }

      fuchi {
        mass = 25.10
        length = 1.2
      }

      lower-seppa {
        mass = 7.37
        length = 0.103
      }

      tsuba {
        mass = 105.62
        length = 0.37
      }

      upper-seppa {
        mass = 7.21
        length = 0.115
      }

      habaki {
        mass = 35.10
        ha-side-length = 3.14
        mune-side-length = 2.57
      }

    }

    blade {

      raw-geometry = [
        {
          x = 76.0
          y = 1.35
          shinken-section = blade
          shinken-part-label = kissake-tip
        },
        {
          x = 74.2
          y = 1.76
          mihaba = 1.4
          kasane = 0.497
          shinken-section = blade
          shinken-part-label = shinogi-end
        },
        {
          x = 72.4
          y = 2.23
          mihaba = 2.15
          shinken-section = blade
          shinken-part-label = yokote
        },
        {
          x = 72.0
          y = 2.3
          mihaba = 2.18
          shinogi-ji = 0.8
          kasane = 0.473
          shinken-section = blade
        },
        {
          x = 64.0
          y = 4.2
          mihaba = 2.55
          shinogi-ji = 0.85
          kasane = 0.473
          shinken-section = blade
        },
        {
          x = 56.0
          y = 5.8
          mihaba = 2.7
          shinogi-ji = 0.87
          kasane = 0.464
          shinken-section = blade
        },
        {
          x = 48.0
          y = 7.23
          mihaba = 2.80
          shinogi-ji = 0.9
          kasane = 0.486
          shinken-section = blade
        },
        {
          x = 40.0
          y = 8.5
          mihaba = 2.92
          shinogi-ji = 1.0
          kasane = 0.508
          shinken-section = blade
        },
        {
          x = 32.0
          y = 9.5
          mihaba = 3.08
          shinogi-ji = 1.02
          kasane = 0.533
          shinken-section = blade
        },
        {
          x = 24.0
          y = 10.3
          mihaba = 3.1
          shinogi-ji = 1.05
          kasane = 0.543
          shinken-section = blade
        },
        {
          x = 16.0
          y = 10.92
          mihaba = 3.15
          shinogi-ji = 1.1
          kasane = 0.568
          shinken-section = blade
        },
        {
          x = 8.0
          y = 11.27
          mihaba = 3.23
          shinogi-ji = 1.1
          kasane = 0.573
          shinken-section = blade
        },
        {
          x = 4.0
          y = 11.4
          mihaba = 3.28
          shinogi-ji = 1.2
          kasane = 0.586
          shinken-section = blade
        },
        {
          x = 3.0
          y = 11.4
          mihaba = 3.3
          shinogi-ji = 1.2
          kasane = 0.586
          shinken-section = blade
          shinken-part-label = ha-machi
        },
        {
          x = 2.6
          y = 11.4
          shinken-section = blade
          shinken-part-label = mune-machi
        },
        {
          x = 2.6
          y = 11.6
          shinken-section = tang
        },
        {
          x = 2.0
          y = 11.6
          shinken-section = tang
          shinken-part-label = coordinate-reflection
        },
        {
          x = 4.0
          y = 15.85
          mihaba = 3.0
          shinken-section = tang
          shinken-part-label = coordinate-reflection
          reflected = true
          displaced = true
        },
        {
          x = 6.0
          y = 15.85
          shinken-section = tang
          shinken-part-label = polish-line
          reflected = true
          displaced = true
        },
        {
          x = 8.0
          y = 15.85
          mihaba = 2.95
          shinken-section = tang
          reflected = true
          displaced = true
        },
        {
          x = 16.0
          y = 15.83
          mihaba = 2.65
          shinken-section = tang
          reflected = true
          displaced = true
        },
        {
          x = 24.0
          y = 15.78
          mihaba = 2.45
          shinken-section = tang
          reflected = true
          displaced = true
        },
        {
          x = 29.0
          y = 15.63
          mihaba = 2.35
          shinken-section = tang
          shinken-part-label = tang-mune-end
          reflected = true
          displaced = true
        },
        {
          x = 29.6
          y = 16.4
          shinken-section = tang
          shinken-part-label = tang-end-point
          reflected = true
          displaced = true
        },
        {
          x = 27.6
          y = 16.85
          shinken-section = tang
          shinken-part-label = mekugi-ana
          reflected = true
          displaced = true
        },
        {
          x = 10.3
          y = 17.25
          shinken-section = tang
          shinken-part-label = mekugi-ana
          reflected = true
          displaced = true
        }
      ]

      mass = 767.17

      balance-beam-meausrements = [
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 98.6
          counter-balance-mass = 347.04
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 95
          counter-balance-mass = 358.47
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 90
          counter-balance-mass = 379.89
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 85
          counter-balance-mass = 402.90
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 80
          counter-balance-mass = 425.50
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 75
          counter-balance-mass = 454.04
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 70
          counter-balance-mass = 490.52
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 65
          counter-balance-mass = 526.62
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 60
          counter-balance-mass = 571.45
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 55
          counter-balance-mass = 625.19
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 50
          counter-balance-mass = 694.17
        },
        {
          nakago-jiri-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 47.7
          counter-balance-mass = 729.59
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 97.6
          counter-balance-mass = 414.10
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 95
          counter-balance-mass = 423.87
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 90
          counter-balance-mass = 449.90
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 85
          counter-balance-mass = 475.66
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 80
          counter-balance-mass = 505.79
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 75
          counter-balance-mass = 540.18
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 70
          counter-balance-mass = 586.31
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 65
          counter-balance-mass = 624.35
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 60
          counter-balance-mass = 680.83
        },
        {
          kissake-sake-position = -1.6
          fulcrum-position = 0.0
          counter-balance-position = 55
          counter-balance-mass = 741.62
        }
      ]
    }
  }

  inference-parameters {
    use-analytic-inference = true
    gaussian-process-coefficient = 5.0 #1.55
    blade-section-parameters = [
      {
        shinken-part-label = tsuka
        quadrature-size = 10 #34 #20
        min-mass = 160
        max-mass = 300
      },
      {
        shinken-part-label = tsuba
        quadrature-size = 5 #5
        min-mass = 100
        max-mass = 200
      },
      {
        shinken-part-label = habaki
        quadrature-size = 5 #5
        min-mass = 20
        max-mass = 70
      },
      {
        shinken-part-label = blade
        quadrature-size = 20 #70
      },
      {
        shinken-part-label = kissake
        quadrature-size = 5
      }
    ]

    rotational-fit-tolerance = 1e-10
    inverse-arc-length-convergence-tolerance = 1e-5

    hookes-and-jeeves-parameters {
      convergence-threshold = 1e-4
      number-of-prior-samples-to-set-scale = 100
    }

    coordinate-slide-parameters {
      convergence-threshold = 1e-5
      golden-section-tolerance = 1e-10
      line-probe-expansion-factor = 2.0
      number-of-prior-samples-to-set-scale = 100
    }

    mds-parameters {
      convergence-threshold = 1e-20
      expansion-multiplier = 2.0
      contraction-multiplier = 0.5
      evaluation-parallelism = 6
      number-of-prior-samples-to-set-starting-point = 100
    }

    hmcmc-parameters {
      steps-between-samples = 100
      steps-in-dynamics-simulation = 100
      warmup-step-count = 1000
      dynamics-simulation-step-size = 1e-5
      max-step-size-history-for-adjustment = 100
      target-acceptance-ratio = .99
      sample-parallelism = 12
    }

    leapfrogmcmc-parameters {
      steps-between-samples = 100
      warmup-step-count = 1000
      sample-pool-size = 100
    }
  }

  visualisation-parameters {
    sample-count = 20
    graph-line-increment = 0.01
    graph-kernel-variance = 0.0005
    num-x-plot-points = 120
    num-y-plot-points = 120
  }
}